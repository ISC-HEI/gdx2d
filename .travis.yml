language: java
jdk:
- openjdk6
- openjdk7
- oraclejdk7
- oraclejdk8

branches:
  only:
  - master
  - develop

sudo: false

cache:
  directories:
  - "$HOME/.m2"

env:
  global:
  # Publish the gdx2d API Javadoc to the gdx2d website
  # - secure: Trl21W5O4XR8sTR9JPrYk4Rl/9j3CfbXLvFOWepQ8dcl5r90OeqUtBZvEygxzem1fqBGDHPryC/hSMoimac5YQj9J7PFqi15zQ4JhYNbg8zvpgfGk4tJwmJ+nBzz9TF6lkZQsRGwqpWYaSnv5BlL8fnuIRREe2FbHyCEZEcLeNk=

  # Publish snapshots to Sonatype (CI_DEPLOY_PASSWORD)
  - CI_DEPLOY_USERNAME=metc
  - secure: LfqFpafZjmZlq3ows8cUQ1kzev3YVPrPfAjxwfHJm6rWNjbzd5a7e4WK4ligtnVVjHvbOOsXaPF25j6DmIZGpOfCwscEdba7Nc3rPFlTubS6LT79p54/USbrr3jGOx+UlObjf91TU2WJqPSV5a5z17Awl/vXLAoDMebTYoaJSHA=

install:
- mvn install -DskipTests=true -Dgpg.skip=true

# Publish snapshots to Sonatype
after_success:
  - "[[ ${TRAVIS_PULL_REQUEST} == 'false' ]] && [[ ${TRAVIS_TAG} == '' ]] && mvn deploy -DskipTests --settings ./.travis/deploy-settings.xml"

# Do not generate the javadoc for each modules any more
# after_success:
#   - ./.travis/publish-javadoc-api.sh
